---
title: "CODA TMSR Report"
output: github_document
date: '`r format(Sys.time(), "%d %B, %Y")`'
bibliography: references.bib
knit: worcs::cite_all
---

```{r setup, include=FALSE}
library(worcs)
library(dbscan)
library(umap)
library(data.table)
library(ggplot2)
library(reticulate)
use_virtualenv("tmsrcoda")
pypkgs <- py_list_packages()
if(!"hdbscan" %in% pypkgs$package) reticulate::py_install("hdbscan")
if(!"umap-learn" %in% pypkgs$package) reticulate::py_install("umap-learn")
load_data()
knitr::opts_chunk$set(echo = TRUE)
```

```{r eval = FALSE}



# Remove outliers ---------------------------------------------------------
res_clust <- hdbscan(mat_vect, minPts = 10)
tend <- Sys.time()
tmp <- yaml::read_yaml("durations.yml")
tmp[["hdbscan"]] <- tend-tstart
yaml::write_yaml(tmp, "durations.yml")
res_clust

table(res_hdbscan$labels)

  cluster_words <- split(df$word[unique_words], factor(res_hdbscan$labels))

```

